// Invoke me via Command Palette: Run Tasks

{
	"version": "2.0.0",
    "options": {
        // WARNING: Make sure that your ~/.bashrc doesn't manually set
        // a current working directory for you; eg. 'cd' command.
        // Otherwise, it will undo this "cwd" tuple and you 
        // will get the error "make failed with code 2."
        "cwd": "${workspaceFolder}",
    },
	"tasks": [
        {
            "label": "build",
            "type": "shell",

            //
            "windows": { "command": "cmake --build ./build" },
            "osx": { "command": "cmake -DCMAKE_SYSTEM_NAME=Darwin -S . -B ./build" },
            //

            //"command": "cmake --build ./build",
            "group": {
                "kind": "build",
                "isDefault": true
            }
        },
        {
            "label": "regenerate/build",
            "type": "shell",
            
            //
            "windows": { "command": "cmake -S . -B ./build && cmake --build ./build"},
            "osx": { "command": "cmake -DCMAKE_SYSTEM_NAME=Darwin -S . -B ./build && cmake --build ./build" },
            //

            //"command": "cmake -S . -B ./build && cmake --build ./build",
            "group": {
                "kind": "build",
                "isDefault": false
            }
        },
        {
            "label": "clean",
            "type": "shell",
            
            //
            "windows": { "command": "cmake --build ./build --target clean"},
            "osx": { "command": "cmake --build ./build --target clean" },
            //

            //"command": "cmake --build ./build --target clean",
            "group": {
                "kind": "build",
                "isDefault": false
            }
        },
        {
            "label": "test",
            "type": "shell",
            "command": "(cd ./build && ctest --verbose)",
            "group": {
                "kind": "test",
                "isDefault": true
            }
        }
    ]
}